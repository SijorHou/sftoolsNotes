# 拓展
1. systemed
   1. [systemctl 命令详解](https://blog.csdn.net/baidu_41553551/article/details/125303909?ops_request_misc=%257B%2522request%255Fid%2522%253A%25229195543C-816D-4D13-BDE6-E2D0D729FFB5%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=9195543C-816D-4D13-BDE6-E2D0D729FFB5&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-125303909-null-null.142^v100^pc_search_result_base5&utm_term=systemctl&spm=1018.2226.3001.4187)
   2. [systemed 官网](https://systemd.io/)
   3. [完全指南：systemctl命令及服务管理技巧](https://blog.csdn.net/qq_41308872/article/details/133743091?ops_request_misc=&request_id=&biz_id=102&utm_term=systemctl&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-133743091.nonecase&spm=1018.2226.3001.4187)
2. ps
   1. [ps 命令详解](https://blog.csdn.net/qq_40673786/article/details/135166627?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522935040D8-6D90-483E-B978-0BC8748026F6%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=935040D8-6D90-483E-B978-0BC8748026F6&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-135166627-null-null.142^v100^control&utm_term=Linux%E7%9A%84%20ps%E5%91%BD%E4%BB%A4&spm=1018.2226.3001.4187)
3. grep
   1. [grep 命令详解](https://blog.csdn.net/m0_53741670/article/details/129484597?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522E7F25FC7-5E3B-4969-ADDA-2A9372F8E5C5%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=E7F25FC7-5E3B-4969-ADDA-2A9372F8E5C5&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-4-129484597-null-null.142^v100^control&utm_term=Linux%E7%9A%84%20grep%E5%91%BD%E4%BB%A4&spm=1018.2226.3001.4187)



# 问题解决
1. `yum install tree` 安装包的时候报错
    [yum命令报错“Could not resolve host: mirrorlist.centos.org； Unknown error“解决办法](https://blog.csdn.net/qq_34585611/article/details/140390894?ops_request_misc=%257B%2522request%255Fid%2522%253A%25225C09FF9F-8CFF-4298-9A8D-C252717F3B7C%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=5C09FF9F-8CFF-4298-9A8D-C252717F3B7C&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-5-140390894-null-null.142^v100^pc_search_result_base5&utm_term=Could%20not%20resolve%20host%3A%20mirrorlist.centos.org)
    
2. 无ens33无网络问题
[问题解决教程](https://blog.csdn.net/wangning0714/article/details/130841243?ops_request_misc=&request_id=&biz_id=102&utm_term=%E8%99%9A%E6%8B%9F%E6%9C%BALinux%E6%B2%A1%E6%9C%89%E7%BD%91%E7%BB%9Cens33&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-2-130841243.142^v100^pc_search_result_base5&spm=1018.2226.3001.4187)

1. WSL 与 Windows互ping
[WSL ping Windows](https://blog.csdn.net/Cypher_X/article/details/123011200)
[WSL 镜像共享主机代理](https://blog.csdn.net/weixin_62355896/article/details/134458330?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522D96D92CB-AE8B-468A-8C2F-4D5BF9D06DB7%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=D96D92CB-AE8B-468A-8C2F-4D5BF9D06DB7&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-134458330-null-null.142^v100^control&utm_term=wsl%3A%20%E6%A3%80%E6%B5%8B%E5%88%B0%20localhost%20%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%EF%BC%8C%E4%BD%86%E6%9C%AA%E9%95%9C%E5%83%8F%E5%88%B0%20WSL%E3%80%82NAT%20%E6%A8%A1%E5%BC%8F%E4%B8%8B%E7%9A%84%20WSL%20%E4%B8%8D%E6%94%AF%E6%8C%81%20localhost%20%E4%BB%A3%E7%90%86%E3%80%82&spm=1018.2226.3001.4187)


# linux 基础篇

## 课程基本内容
<div style="text-align:center">
    <img src="/tools3_Linux/pic_source/content.png" alt="图片描述" style="margin-bottom: 1px;">
    <p>linux课程内容</p>
</div>

<div style="text-align:center">
    <img src="/tools3_Linux/pic_source/拓展内容.png" alt="图片描述" style="margin-bottom: 1px;">
    <p>拓展内容</p>
</div>

## 虚拟机以及centos安装教程
[VMware虚拟机搭建Linux CentOS7（全网最详细图文讲解）](https://blog.csdn.net/Myx74270512/article/details/127883266?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171430541616800227423510%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=171430541616800227423510&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-127883266-null-null.142^v100^pc_search_result_base8&utm_term=%E8%99%9A%E6%8B%9F%E6%9C%BAcentos%E5%AE%89%E8%A3%85&spm=1018.2226.3001.4187)

[VM 卸载](https://blog.csdn.net/weixin_55118477/article/details/121078890)

## 网络连接的三种模式
虚拟机中的 ***[NAT](https://www.xiaolincoding.com/network/4_ip/ip_base.html#nat)（Network Address Translation）是一种网络地址转换技术***，*它允许多个设备共享一个单一的公网IP地址来访问互联网*。NAT在虚拟化环境中非常常见，因为它允许虚拟机使用私有IP地址，同时通过宿主机的网络接口连接到外部网络。

网络连接的三种常见模式包括：

1. **桥接模式（Bridged Mode）**：
   - 在桥接模式下，虚拟机被当作网络上的独立设备，拥有自己的MAC地址和IP地址。虚拟机直接连接到物理网络，就像它是网络上的另一台物理机器一样。

2. **NAT模式（NAT Mode）**：
   - 如前所述，NAT模式允许虚拟机共享宿主机的IP地址。虚拟机通过宿主机的网络接口访问外部网络，宿主机负责将虚拟机的私有IP地址转换为公网IP地址。

3. **仅主机模式（Host-Only Mode）**：
   - 仅主机模式创建了一个虚拟的私有网络，只包括宿主机和虚拟机。在这种模式下，虚拟机不能直接访问外部网络，但可以与宿主机进行通信。这通常用于测试或开发环境，其中网络隔离是必需的。


## 虚拟机相关操作
### 虚拟机克隆
（linux本质是文件）
- 1. 方案1：将虚拟机文件夹复制一份，VM中打开
- 2. 方案2：关闭虚拟机，VM中右键克隆：克隆当前状态->创建完整克隆
- PS：虚拟机迁移删除也是如此，直接将整体文件夹进行拷贝和剪切到另外位置即可

### 虚拟机快照
想让虚拟机回到原来的某个正常状态，可以使用VM的虚拟机快照管理功能

- 1. 在执行某个操作前，如果想要保存当前虚拟机状态A，右键虚拟机，点击"快照"
- 2. 当执行若干操作后，可能有了多个快照 A->B->C->...
- 3. 若要回到之前的状态如B，右键虚拟机"快照管理器"，选择快照后，点击"转到"（可以产生新的快照分支）
<div style="text-align:center">
    <img src="/tools3_Linux/pic_source/快照管理.png" alt="图片描述" style="margin-bottom: 1px;">
    <p>快照管理</p>
</div>

### vmtools安装
[安装vmtools]((https://blog.csdn.net/weixin_43624626/article/details/123451198?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171453418416800197045550%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=171453418416800197045550&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-1-123451198-null-null.142^v100^pc_search_result_base8&utm_term=centos%E5%AE%89%E8%A3%85vmtools&spm=1018.2226.3001.4187))可以更好的管理vm虚拟机，如 ***可以设置windows和centos的共享文件夹***
    
<div style="text-align:center">
    <img src="/tools3_Linux/pic_source/vmtools安装.png" alt="图片描述" style="margin-bottom: 1px;">
    <p>vmtools安装</p>
</div>

问题解决:
[centos7安装 VMTools显示灰色正确解决办法](https://blog.csdn.net/hsuehgw/article/details/129482915)
这里实际上在开启虚拟机的时候就点击VMware查看，`重新安装VMware Tools` 会亮起来
注意进入虚拟机后，点击 `单列？` 登录 root 账户进行操作

***安装步骤***
1. `VMwareTools-10.3.22-15902021.tar.gz` 拷贝到 `其他->计算机->opt` 文件夹中去
2. 打开终端
   1. `cd /opt` 进入 opt 目录， `ls` 展示文件夹中内容，可以看到拷贝过来的 `VM...`压缩包
   2. `tar -zxvf VM...` 解压该压缩包，`ls` 查看解压文件夹名字 `vm...`
   3. `cd vm...` 进入解压文件夹，`ls` 查看文件，找到 `vmware-install.pl` 安装文件
   4. `./vmware-install.pl` 执行安装文件（需要有 `gcc` 环境）
   5. 一直回车，最后一步选择 no


<div style="text-align:center">
    <img src="/tools3_Linux/pic_source/vm-tools安装后设置共享文件夹.png" alt="设置共享文件夹" style="margin-bottom: 1px;">
    <p>设置共享文件夹</p>
</div>

***设置共享文件夹***
1. Windows 中新建一个用于共享的文件夹
2. VMware 库中右键虚拟机，`设置 ——> 选项 ——> 共享文件夹 ——> 总是启用 ——> 添加主机路径` 然后确认完成
3. Linux如何访问共享文件夹？

## 目录结构
Linux的目录结构以树形方式呈现，以下是Linux系统中一些常见目录及其作用：

1. **/root**：这是 ***系统管理员（也称为超级权限者）的用户主目录***，也就是root用户的家目录。
2. **/boot**：这个目录存放的是启动Linux时使用的核心文件，包括一些连接文件和镜像文件，如内核文件、引导加载器和启动程序等。
3. **/bin**：这个目录存放所有用户都可以使用的Linux操作命令，包括一些二进制文件。这些命令是系统启动即会用到的程序，不能关联至独立分区。
4. **/sbin**：这个目录保存和系统相关环境设置命令，只有超级用户可以使用这些命令进行系统环境设置，但有些命令可以允许普通用户查看。
5. **/lib** 和 **/lib64**：这两个目录存放了系统所需的一些共享库文件。其中，***/lib目录存放了启动时程序依赖的基本共享库文件以及内核模块文件***，而/lib64目录则是专用于x86_64系统上的辅助共享库文件存放位置。
6. **/etc**：这个目录是系统的配置文件存放目录，包含了许多系统和应用程序的配置文件，这些文件都是纯文本文件。
7. **/home**：这个目录是默认的用户家目录存放目录，每个普通用户都有自己的家目录，通常位于/home/用户名下。
8. **/media** 和 **/mnt**：这两个目录都与设备的挂载有关。/media目录是Linux系统自动识别并挂载一些设备（如U盘、光驱等）的目录，而/mnt目录则是临时文件系统挂载点，通常用于手工挂载设备。
9. **/dev**：这个目录类似于Windows的设备管理器，把所有的硬件用文件的形式存储。通过/dev目录下的文件，可以管理和访问系统中的各种设备。
10. **/opt**：这个目录是用来存放安装的可选软件的目录。一些第三方软件包或应用程序可以选择安装到/opt目录下，以便更好地管理和组织。
11. **/tmp**：这个目录是用来存放临时文件的目录。在Linux系统中，临时文件可能会产生，这些文件通常会被定期自动删除。
12. **/usr**：这个目录是系统软件资源目录，存储了用户环境的设置。根据不同的用户设置，这里会有不同的环境。同时，/usr/local目录是Linux额外的软件安装的目录，一般是通过编译源码的方式安装目录。
13. **/var**：这个目录用于存储额外产生日志的文件和其他动态数据。
14. **/proc** 和 **/sys**：这两个目录都是虚拟文件系统，主要保存系统的内核、进程、外部设备状态和网络设备状态等信息。

<div style="text-align:center">
    <img src="/tools3_Linux/pic_source/linux目录结构1.png" alt="图片描述" style="margin-bottom: 1px;">
    <img src="/tools3_Linux/pic_source/linux目录结构2.png" alt="图片描述" style="margin-bottom: 1px;">
    <img src="/tools3_Linux/pic_source/linux目录结构3.png" alt="图片描述" style="margin-bottom: 1px;">
    <p>linux目录结构</p>
</div>

## 远程登录及文件传输

### Xshell Xftp 使用
1. 公司开发的具体场景
    - linux服务器是开发小组共享的
    - 正式上线项目运行在公网
    - 程序员需要远程登录到linux进行项目管理或开发
    - 远程登录客户端有 Xshell6（用于远程登录）、Xftp6（传输文件）

2. [Xshell下载远程连接服务器教程](https://blog.csdn.net/qiujicai/article/details/139868155?ops_request_misc=&request_id=&biz_id=102&utm_term=xshell%E4%B8%8B%E8%BD%BD%E6%95%99%E7%A8%8B&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-139868155.nonecase&spm=1018.2226.3001.4187)

- `ifconfig` 查看Linuxi 的ip（ens33）
- Xshell中新建会话，设置名字、ssh连接方式、ip、22端口号
- 建立会话后双击会话，填写密码


3. Xftp 下载同理
- Xftp左上角文件-打开，可以新建会话
- 填写名称、ip、SFTP连接方式、22端口号、主机名、密码
- PS：建立会话连接后，Linux中文件乱码：修改会话属性为UTF-8

## vim 使用

三种模式：命令/普通模式、输入/插入模式、命令行模式

***命令/普通模式***
- `vim filename.fmt` 进入vim文本编辑（刚进入是 **普通/命令模式**）
- `iao` 以为不同方式进入插入模式
  - `i` 进入插入模式，从当前光标位置开始插入
  - `a` 进入插入模式，从当前光标的下一个位置开始插入
  - `o` 在当前光标所在行的下方插入空行，从空行开始输入（进入了插入模式）
  - `O` 在当前光标所在行的上方插入空行，从空行开始输入（进入了插入模式）
- `dd` 剪切光标所在行； `5dd` 剪切从光标所在行开始的下面 5行
- `yy` 复制光标所在行； `5yy` 复制从光标所在行开始的下面 5行
- `p` paste 将内容粘贴到光标所在行之下
- `P` paste 将内容粘贴到光标所在行之上
- `u` 撤销上一步操作
- `Ctrl + r` 重新操作一次撤销的内容
- `gg, G` 小写将光标定位到文本首行，大写将光标定位到末行 
- `num + shift g` 输入一个数字`num` 代表行号，按键会快速定位到该行 


***命令行模式***
- `[ESC] :w`  `[ESC]` 表可选，如果在输入/插入模式，按`[ESC]`退出到普通模式，然后进行 `write`写入，即保存
- `[ESC] :q` 退出Vim编辑器
- `[ESC] :wq` 保存并退出
- `[ESC] :q!` 强制退出，不保存
- `/ + keywords + Enter` 在普通模式时，左斜杠进入命令行模式，输入关键字，回车查询关键字
- `[ESC] :set nu` 在文本中设置行号
  - `[ESC] :set nonu` 在文本中取消设置行号


## Linux 关机重启
<div style="text-align:center">
    <img src="/tools3_Linux/pic_source/关机重启.png" alt="关机重启" style="margin-bottom: 1px;">
    <p>关机重启</p>
</div>

## 用户登录和注销

- `su user` 登录一个用户（root、user）
- `logout/exit` 注销用户（无UI界面/UI界面），返回上一个登录的用户、退出系统 


## 用户管理
- `useradd username` 添加用户
  - `useradd -d home-path username` 一般添加用户的时候会指定该用户的家目录，通常是同名，如 `useradd -d /home/tom tom`, 也可以不同名， 不加设置默认同名
  - `useradd -g group_name` 创建用户时指定属组，否则默认创建一个与username同名的属组
- `userdel username` 删除用户
  - 默认删除，该用户的家目录不会被删除，`/etc/passwd, group, shadow` 中对应的用户的相关信息会删除
  - `userdel -r username` 删除用户时候连通用户的家目录一起删除
- `who am i` 查看当前用户（显示第一次登录的用户信息，避免切换用户造成混淆）
- `usermod [option]` 修改用户相关属性
  - 如 `usermod -s /bin/ksh -d /home/z –g developer`
  - 此命令将用户sam的登录Shell修改为ksh，主目录改为/home/z，用户组改为developer
<div style="text-align:center">
    <img src="/tools3_Linux/pic_source/用户和组相关文件.png" alt="用户和组相关文件" style="margin-bottom: 1px;">
    <p>用户和组相关文件</p>
</div>

## 用户组
- `groupadd [option] groupname` 新增一个用户组
  - `-g`修改组的GID用户标识, 如`groupadd -g 1005 userrr`
  - `-o` 一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同
- `groupdel groupname` 删除用户组
- `groupmod [option] groupname` 修改用户组的属性（GID、名称）
  - `-g, groupmod -g 1002 userrr` 修改用户组 `userrr` 的GID 为 1002
  - `-n, groupmod -n newname userrr` 修改用户组 `userrr` 的名字 为 `newname`
  - `-o` 一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同
- `newgrp othergroup` 一个用户有多个属组，切换到 `othergroup`

## 运行级别

***指定运行级别***

- `init [0123456]` 切换不同运行级别
  - 0：停机模式，系统会关闭。
  - 1：单用户模式，用于系统维护。
  - 2：多用户模式，没有网络服务。
  - 3：完全多用户模式，具有网络功能。
  - 4：保留未使用。
  - 5：图形界面模式，具有网络功能。
  - 6：重启模式，系统会重启

常用 3， 5
**init 命令已经被 systemctl 命令取代**

- `systemctl get-default` 查看当前运行级别(target)
  - `graphical.target` 表运行的图形界面 5
  - `multi-user.target` 表多用户模式 3
- `systemctl set-defult xxx.target` 设置当前target
  - 如执行 `systemctl set-defult multi-user.target` 然后重启，则切换到命令行多用户模式

## systemctl command detail

语法： ***`systemctl COMMAND name.service`***
用途： 用于控制 systemed系统和服务，***systemed是Linux中用于 初始化系统组件、管理系统进程的 daemon守护进程和服务管理器***

<div style="text-align:center">
    <img src="/tools3_Linux/pic_source/systemed命令.png" alt="systemed命令" style="margin-bottom: 1px;">
    <p>systemed命令</p>
</div>

systemed系统重，服务 service 通常指后台运行的进程，可以是系统服务如网络管理、日志记录、硬件管理等，也可以是用户服务，如web服务、数据库服务等

- 服务： systemed管理的实体，定义了如何启动和管理一个或多个进程
- 进程： os系统执行程序的一个实例


***systemctl list-units***
- `--type=`列出指定类型的单元
  - `systemctl list-units` 默认列出所有服务单元（`.device, .mount, .service, .slice, .target, timer`）
  - `systemctl list-units --type=service`
- `--state=` 列出指定状态的单元
  - `systemctl list-units --state=running`
  - `systemctl list-units --state=running --type=service`


## 文件目录管理
